<template>
    <div class="todos">
        <a href="#/add" class="todo-add"><i class="fa fa-plus-square"></i></a>
        <ul class="filter-category">
            <li
                a-for="item in categories"
                :style="'background: ' + item.color"
            >
                <a :href="'todos/category/' + item.id">{{ item.title }}</a>
            </li>
        </ul>

        <ul class="todo-list">
            <p-item :item="todo" a-for="todo, index in todos">
                <template scope="scopeProps">
                    <div>
                        <h3>{{ scopeProps.item.title }}</h3>
                        <p>{{ scopeProps.item.desc }}</p>
                        <div class="todo-meta">
                            <span a-if="scopeProps.item.category">{{ scopeProps.item.category.title }} | </span>
                        </div>
                        <a class="fa fa-pencil" :href="'/edit/' + scopeProps.item.id"></a>
                        <i class="fa fa-check" @click="doneTodo(index)"></i>
                        <i class="fa fa-trash-o" @click="rmTodo(index)"></i>
                    </div>
                </template>
            </p-item>
        </ul>
    </div>
</template>

<script lang="ts">
import Atom from '@baidu/atom-web-runtime';
import PItem from './scoped-slot-child.atom';

export default Atom.extend({
    props: ['todos', 'categories'],
    components: {
        'p-item': PItem
    }
});
</script>
